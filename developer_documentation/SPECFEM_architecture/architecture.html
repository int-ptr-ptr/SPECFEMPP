<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SPECFEM++ Architecture &mdash; SPECFEM++  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/scrollable_code_blocks.css?v=ebc906c5" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/center_align_table.css?v=f0548739" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Quadrature developer guide:" href="quadrature.html" />
    <link rel="prev" title="Tests" href="../tests.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            SPECFEM++
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">USER DOCUMENTATION</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user_documentation/index.html">User documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../meshfem2d/index.html">MESHFEM Parameter Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../parameter_documentation/index.html">SPECFEM++ Parameter Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../source_description/index.html">Source Description</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">COOKBOOKS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cookbooks/index.html">Cookbooks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CONTRIBUTION GUIDELINES</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../git_workflow.html">Git development workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_requirements.html">Build system requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../style.html">Style</a></li>
<li class="toctree-l2"><a class="reference internal" href="../style.html#pre-commit">Pre-commit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tests.html">Tests</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">SPECFEM++ Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="quadrature.html">Quadrature developer guide:</a></li>
<li class="toctree-l3"><a class="reference internal" href="mesh.html">Mesh developer guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="compute.html">Compute namespace developer guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="domain.html">Domain and Coupled Interface Developer Guide</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">COMMUNITY</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/PrincetonUniversity/specfempp/issues/new?assignees=&amp;labels=&amp;projects=&amp;template=bug_report.md&amp;title=">Report bugs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/PrincetonUniversity/specfempp/issues/new?assignees=&amp;labels=&amp;projects=&amp;template=feature_request.md&amp;title=">Request a new feature</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/orgs/SPECFEM/discussions">Join the discussion</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BENCHMARKS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../benchmarks/benchmarks.html">Performance Benchmarks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API DOCUMENTATION</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SPECFEM++</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Developer documentation</a></li>
      <li class="breadcrumb-item active">SPECFEM++ Architecture</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/developer_documentation/SPECFEM_architecture/architecture.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="specfem-architecture">
<span id="architecture"></span><h1>SPECFEM++ Architecture<a class="headerlink" href="#specfem-architecture" title="Link to this heading"></a></h1>
<p>SPECFEM++ is designed with portability and modularity as primary goals. The goal is develop a code that is easy to maintain and extend, while maintaining performance characteristics of original <a class="reference external" href="https://specfem2d.readthedocs.io">SPECFEM2D solver</a>. This is achieved using C++ templatized classes.</p>
<p>The code is divided into set of modules (classes and structs), the major of which to understand code architecture are:</p>
<ol class="arabic simple">
<li><p>Quadrature : This module defines the quadrature rules used to compute differentials and integrals.</p></li>
<li><p>Mesh : Mesh struct defines the IO routines and data structures used to read and store mesh generated by internal meshing tools or external meshing tools such as CUBIT.</p></li>
<li><p>Compute : Compute struct defines data structures used to compute and store velocity models, spatial derivatives, source and receiver properties, coupled interface location and properties, and other data structures required to compute the evolution of the wavefield at each time step. The compute struct provides an interface layer where the developer can access simulation data at any timestep.</p></li>
<li><p>Domain : Domain is a templated class which defines methods required to compute the evolution of the wavefield at each time step. The class is templated on type of domain (acoustic, elastic, poroelastic, etc.), where we define specialized template implementations for each domain type.
The domain class in itself defines (Kokkos) parallelism used to compute the evolution of the wavefield. The physics of the domain is defined by specialized templated element, source and receiver classes. This lets us separate the physics of the domain from the parallelism, which should make it easier to extend the code to different physics.</p></li>
<li><p>Coupling Interfaces : <code class="docutils literal notranslate"><span class="pre">coupled_interfaces</span></code> class defines the methods used to compute coupling between different domains. The class is templated on the two domains that are coupled (<code class="docutils literal notranslate"><span class="pre">self_domain_type</span></code>, <code class="docutils literal notranslate"><span class="pre">coupled_domain_type</span></code>), where we define specialized template implementations for different domain combinations.
Similar to the domain class, the coupling interface class in itself defines (Kokkos) parallelism used to compute the coupling between the two domains. The physics of the coupling is defined by specialized templated edge class.</p></li>
</ol>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../../_images/SPECFEM_Architecture.svg"><img alt="SPECFEM Architecture" src="../../_images/SPECFEM_Architecture.svg" width="800" /></a>
<figcaption>
<p><span class="caption-text">SPECFEM Architecture.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="quadrature.html">Quadrature developer guide:</a></li>
<li class="toctree-l1"><a class="reference internal" href="mesh.html">Mesh developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="compute.html">Compute namespace developer guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="domain.html">Domain and Coupled Interface Developer Guide</a></li>
</ul>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../tests.html" class="btn btn-neutral float-left" title="Tests" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="quadrature.html" class="btn btn-neutral float-right" title="Quadrature developer guide:" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Rohit Kakodkar.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>